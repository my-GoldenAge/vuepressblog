<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>线程的状态转换以及基本操作 | MyGoldenAge</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/vuepress/img/favicon.ico">
    <link rel="stylesheet" href="/vuepress/css/style.css">
    <script charset="utf-8" src="/vuepress/js/custom.js"></script>
    <meta name="description" content="线程的状态转换以及基本操作《Java并发编程的艺术》">
    <meta name="keywords" content="全栈,黄金时代">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta name="robots" content="all">
    <meta name="author" content="萧瑟">
    
    <link rel="preload" href="/vuepress/assets/css/0.styles.6b8489ed.css" as="style"><link rel="preload" href="/vuepress/assets/js/app.1688b474.js" as="script"><link rel="preload" href="/vuepress/assets/js/4.87cca1e2.js" as="script"><link rel="preload" href="/vuepress/assets/js/1.e3a634da.js" as="script"><link rel="preload" href="/vuepress/assets/js/19.f57142c1.js" as="script"><link rel="preload" href="/vuepress/assets/js/23.18ff150a.js" as="script"><link rel="prefetch" href="/vuepress/assets/js/10.33f4d679.js"><link rel="prefetch" href="/vuepress/assets/js/11.633d59fc.js"><link rel="prefetch" href="/vuepress/assets/js/12.6566debe.js"><link rel="prefetch" href="/vuepress/assets/js/13.813b91b9.js"><link rel="prefetch" href="/vuepress/assets/js/14.0508579e.js"><link rel="prefetch" href="/vuepress/assets/js/15.bea71415.js"><link rel="prefetch" href="/vuepress/assets/js/16.d5a87820.js"><link rel="prefetch" href="/vuepress/assets/js/17.a3ea973d.js"><link rel="prefetch" href="/vuepress/assets/js/18.cdcd3e86.js"><link rel="prefetch" href="/vuepress/assets/js/20.9ff399c5.js"><link rel="prefetch" href="/vuepress/assets/js/21.bab6863c.js"><link rel="prefetch" href="/vuepress/assets/js/22.551758a7.js"><link rel="prefetch" href="/vuepress/assets/js/24.97cc5fe7.js"><link rel="prefetch" href="/vuepress/assets/js/25.ef5f5151.js"><link rel="prefetch" href="/vuepress/assets/js/26.d8424825.js"><link rel="prefetch" href="/vuepress/assets/js/27.fe42ac28.js"><link rel="prefetch" href="/vuepress/assets/js/28.306a195b.js"><link rel="prefetch" href="/vuepress/assets/js/29.15b3a25f.js"><link rel="prefetch" href="/vuepress/assets/js/30.f58e0ff8.js"><link rel="prefetch" href="/vuepress/assets/js/31.189d9dfa.js"><link rel="prefetch" href="/vuepress/assets/js/32.904cde6d.js"><link rel="prefetch" href="/vuepress/assets/js/33.b7ad2e8e.js"><link rel="prefetch" href="/vuepress/assets/js/34.f59e295f.js"><link rel="prefetch" href="/vuepress/assets/js/35.d200411a.js"><link rel="prefetch" href="/vuepress/assets/js/36.b94f3fd5.js"><link rel="prefetch" href="/vuepress/assets/js/37.ddc71590.js"><link rel="prefetch" href="/vuepress/assets/js/38.a788387b.js"><link rel="prefetch" href="/vuepress/assets/js/39.162e9808.js"><link rel="prefetch" href="/vuepress/assets/js/40.f0c34f21.js"><link rel="prefetch" href="/vuepress/assets/js/41.9579425d.js"><link rel="prefetch" href="/vuepress/assets/js/42.2a8be507.js"><link rel="prefetch" href="/vuepress/assets/js/43.9bee127f.js"><link rel="prefetch" href="/vuepress/assets/js/44.6afdaaec.js"><link rel="prefetch" href="/vuepress/assets/js/45.ecc58971.js"><link rel="prefetch" href="/vuepress/assets/js/5.5f552971.js"><link rel="prefetch" href="/vuepress/assets/js/6.1c9f3509.js"><link rel="prefetch" href="/vuepress/assets/js/7.e627bf76.js"><link rel="prefetch" href="/vuepress/assets/js/8.4a7ea6d0.js"><link rel="prefetch" href="/vuepress/assets/js/9.3f961077.js"><link rel="prefetch" href="/vuepress/assets/js/vendors~flowchart.83bdf470.js">
    <link rel="stylesheet" href="/vuepress/assets/css/0.styles.6b8489ed.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="theme-container" data-v-4698c43e><div data-v-4698c43e><div id="loader-wrapper" class="loading-wrapper" data-v-1c4f0192 data-v-4698c43e data-v-4698c43e><div class="loader-main" data-v-1c4f0192><div data-v-1c4f0192></div><div data-v-1c4f0192></div><div data-v-1c4f0192></div><div data-v-1c4f0192></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-6cbeab0a data-v-4698c43e data-v-4698c43e><h3 class="title" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a>MyGoldenAge</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><input type="password" value="" data-v-6cbeab0a> <span data-v-6cbeab0a>Konck! Knock!</span> <button data-v-6cbeab0a>OK</button></label> <div class="footer" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><span data-v-6cbeab0a><i class="iconfont reco-theme" data-v-6cbeab0a></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-6cbeab0a>vuePress-theme-reco</a></span> <span data-v-6cbeab0a><i class="iconfont reco-copyright" data-v-6cbeab0a></i> <a data-v-6cbeab0a><span data-v-6cbeab0a>萧瑟</span>
            
          <span data-v-6cbeab0a>2022 - </span>
          2022
        </a></span></div></div> <div class="hide" data-v-4698c43e><header class="navbar" data-v-4698c43e><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuepress/" class="home-link router-link-active"><!----> <span class="site-name">MyGoldenAge</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vuepress/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress/categories/Idea/" class="nav-link"><i class="iconfont undefined"></i>
  Idea
</a></li><li class="dropdown-item"><!----> <a href="/vuepress/categories/技术/" class="nav-link"><i class="iconfont undefined"></i>
  技术
</a></li></ul></div></div><div class="nav-item"><a href="/vuepress/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-api"></i>
      Java
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress/Java/Java并发编程的艺术/" class="nav-link"><i class="iconfont undefined"></i>
  Java并发编程的艺术
</a></li><li class="dropdown-item"><h4>前端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepress/技术文章/vue/vue01.html" class="nav-link"><i class="iconfont undefined"></i>
  前端基础
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-faq"></i>
      Idea
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress/Idea/" class="nav-link"><i class="iconfont undefined"></i>
  Idea
</a></li><li class="dropdown-item"><!----> <a href="/vuepress/Idea/王小波/" class="nav-link"><i class="iconfont undefined"></i>
  王小波
</a></li></ul></div></div><div class="nav-item"><a href="/vuepress/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><a href="https://github.com/my-GoldenAge" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-4698c43e></div> <aside class="sidebar" data-v-4698c43e><div class="personal-info-wrapper" data-v-6c8ffc9c><img src="/vuepress/avatar.png" alt="author-avatar" class="personal-img" data-v-6c8ffc9c> <h3 class="name" data-v-6c8ffc9c>
    萧瑟
  </h3> <div class="num" data-v-6c8ffc9c><div data-v-6c8ffc9c><h3 data-v-6c8ffc9c>29</h3> <h6 data-v-6c8ffc9c>文章</h6></div> <div data-v-6c8ffc9c><h3 data-v-6c8ffc9c>9</h3> <h6 data-v-6c8ffc9c>标签</h6></div></div> <hr data-v-6c8ffc9c></div> <nav class="nav-links"><div class="nav-item"><a href="/vuepress/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress/categories/Idea/" class="nav-link"><i class="iconfont undefined"></i>
  Idea
</a></li><li class="dropdown-item"><!----> <a href="/vuepress/categories/技术/" class="nav-link"><i class="iconfont undefined"></i>
  技术
</a></li></ul></div></div><div class="nav-item"><a href="/vuepress/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-api"></i>
      Java
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress/Java/Java并发编程的艺术/" class="nav-link"><i class="iconfont undefined"></i>
  Java并发编程的艺术
</a></li><li class="dropdown-item"><h4>前端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vuepress/技术文章/vue/vue01.html" class="nav-link"><i class="iconfont undefined"></i>
  前端基础
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-faq"></i>
      Idea
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuepress/Idea/" class="nav-link"><i class="iconfont undefined"></i>
  Idea
</a></li><li class="dropdown-item"><!----> <a href="/vuepress/Idea/王小波/" class="nav-link"><i class="iconfont undefined"></i>
  王小波
</a></li></ul></div></div><div class="nav-item"><a href="/vuepress/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><a href="https://github.com/my-GoldenAge" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Java并发编程的艺术</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuepress/Java/Java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E7%9A%84%E8%89%BA%E6%9C%AF/" aria-current="page" class="sidebar-link">Java并发编程的艺术</a></li><li><a href="/vuepress/Java/Java并发编程的艺术/01、并发编程面临的挑战.html" class="sidebar-link">并发编程面临的挑战</a></li><li><a href="/vuepress/Java/Java并发编程的艺术/02、线程的状态转换以及基本操作.html" class="active sidebar-link">线程的状态转换以及基本操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuepress/Java/Java并发编程的艺术/02、线程的状态转换以及基本操作.html#线程的状态转换以及基本操作" class="sidebar-link">线程的状态转换以及基本操作</a></li><li class="sidebar-sub-header"><a href="/vuepress/Java/Java并发编程的艺术/02、线程的状态转换以及基本操作.html#_1-新建线程" class="sidebar-link">1. 新建线程</a></li><li class="sidebar-sub-header"><a href="/vuepress/Java/Java并发编程的艺术/02、线程的状态转换以及基本操作.html#_2-线程状态转换" class="sidebar-link">2. 线程状态转换</a></li><li class="sidebar-sub-header"><a href="/vuepress/Java/Java并发编程的艺术/02、线程的状态转换以及基本操作.html#_3-线程状态的基本操作" class="sidebar-link">3. 线程状态的基本操作</a></li><li class="sidebar-sub-header"><a href="/vuepress/Java/Java并发编程的艺术/02、线程的状态转换以及基本操作.html#_4-守护线程daemon" class="sidebar-link">4.守护线程Daemon</a></li></ul></li><li><a href="/vuepress/Java/Java并发编程的艺术/03、Java内存模型以及happens-before.html" class="sidebar-link">Java内存模型以及happens-before</a></li><li><a href="/vuepress/Java/Java并发编程的艺术/04、彻底理解synchronized.html" class="sidebar-link">彻底理解synchronized</a></li><li><a href="/vuepress/Java/Java并发编程的艺术/05、彻底理解volatile.html" class="sidebar-link">彻底理解volatile</a></li><li><a href="/vuepress/Java/Java并发编程的艺术/06、你真的了解final吗？.html" class="sidebar-link">你真的了解final吗？</a></li><li><a href="/vuepress/Java/Java并发编程的艺术/07、三大性质总结：原子性、可见性以及有序性.html" class="sidebar-link">三大性质总结：原子性、可见性以及有序性</a></li><li><a href="/vuepress/Java/Java并发编程的艺术/08、初识Lock与AbstractQueuedSynchronizer-AQS.html" class="sidebar-link">初识Lock与AbstractQueuedSynchronizer-AQS</a></li><li><a href="/vuepress/Java/Java并发编程的艺术/09、深入理解AbstractQueuedSynchronizer-AQS.html" class="sidebar-link">深入理解AbstractQueuedSynchronizer-AQS</a></li><li><a href="/vuepress/Java/Java并发编程的艺术/10、ReentrantLock的重入性与公平性.html" class="sidebar-link">彻底理解ReentrantLock</a></li><li><a href="/vuepress/Java/Java并发编程的艺术/11、深入理解读写锁ReentrantReadWriteLock.html" class="sidebar-link">深入理解读写锁ReentrantReadWriteLock</a></li><li><a href="/vuepress/Java/Java并发编程的艺术/12、详解Condition的线程通信机制.html" class="sidebar-link">详解Condition的线程通信机制</a></li><li><a href="/vuepress/Java/Java并发编程的艺术/13、LockSupport工具.html" class="sidebar-link">LockSupport工具</a></li><li><a href="/vuepress/Java/Java并发编程的艺术/14、并发容器之ConcurrentHashMap-JDK1.8.html" class="sidebar-link">并发容器之ConcurrentHashMap-JDK1.8</a></li><li><a href="/vuepress/Java/Java并发编程的艺术/15、并发容器之ConcurrentLinkedQueue.html" class="sidebar-link">并发容器之ConcurrentLinkedQueue</a></li><li><a href="/vuepress/Java/Java并发编程的艺术/16、并发容器之CopyOnWriteArrayList.html" class="sidebar-link">并发容器之CopyOnWriteArrayList</a></li><li><a href="/vuepress/Java/Java并发编程的艺术/17、并发容器之ThreadLocal.html" class="sidebar-link">并发容器之ThreadLocal</a></li><li><a href="/vuepress/Java/Java并发编程的艺术/18、并发容器之BlockingQueue.html" class="sidebar-link">并发容器之BlockingQueue</a></li><li><a href="/vuepress/Java/Java并发编程的艺术/19、线程池ThreadPoolExecutor实现原理.html" class="sidebar-link">线程池ThreadPoolExecutor实现原理</a></li><li><a href="/vuepress/Java/Java并发编程的艺术/20、线程池之ScheduledThreadPoolExecutor.html" class="sidebar-link">线程池之ScheduledThreadPoolExecutor</a></li><li><a href="/vuepress/Java/Java并发编程的艺术/21、FutureTask源码解析.html" class="sidebar-link">FutureTask源码解析</a></li><li><a href="/vuepress/Java/Java并发编程的艺术/22、Java中atomic包中的原子操作类总结.html" class="sidebar-link">Java中atomic包中的原子操作类总结</a></li><li><a href="/vuepress/Java/Java并发编程的艺术/23、CountDownLatch与CyclicBarrier计数器.html" class="sidebar-link">CountDownLatch与CyclicBarrier计数器</a></li><li><a href="/vuepress/Java/Java并发编程的艺术/24、java并发工具类-Semaphore，Exchanger.html" class="sidebar-link">java并发工具类-Semaphore，Exchanger</a></li><li><a href="/vuepress/Java/Java并发编程的艺术/25、彻底弄懂生产者--消费者问题.html" class="sidebar-link">彻底弄懂生产者--消费者问题</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-6cbeab0a data-v-4698c43e><h3 class="title" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a>线程的状态转换以及基本操作</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><input type="password" value="" data-v-6cbeab0a> <span data-v-6cbeab0a>Konck! Knock!</span> <button data-v-6cbeab0a>OK</button></label> <div class="footer" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><span data-v-6cbeab0a><i class="iconfont reco-theme" data-v-6cbeab0a></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-6cbeab0a>vuePress-theme-reco</a></span> <span data-v-6cbeab0a><i class="iconfont reco-copyright" data-v-6cbeab0a></i> <a data-v-6cbeab0a><span data-v-6cbeab0a>萧瑟</span>
            
          <span data-v-6cbeab0a>2022 - </span>
          2022
        </a></span></div></div> <div data-v-4698c43e><main class="page"><!----> <div class="page-title" style="display:none;"><h1>线程的状态转换以及基本操作</h1> <hr> <div data-v-484a899e><i class="iconfont reco-account" data-v-484a899e><span data-v-484a899e>萧瑟</span></i> <i class="iconfont reco-date" data-v-484a899e><span data-v-484a899e>2022-03-27 14:45:00</span></i> <!----> <i class="iconfont reco-tag tags" data-v-484a899e><span class="tag-item" data-v-484a899e>
      Java
    </span><span class="tag-item" data-v-484a899e>
      Java并发编程
    </span><span class="tag-item" data-v-484a899e>
      JUC
    </span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><div class="custom-block tip"><p class="custom-block-title">说明</p> <p>线程的状态转换以及基本操作</p></div> <p></p><div class="table-of-contents"><ul><li><a href="#线程的状态转换以及基本操作">线程的状态转换以及基本操作</a></li><li><a href="#_1-新建线程">1. 新建线程</a></li><li><a href="#_2-线程状态转换">2. 线程状态转换</a></li><li><a href="#_3-线程状态的基本操作">3. 线程状态的基本操作</a><ul><li><a href="#_3-1-interrupted">3.1. interrupted</a></li><li><a href="#_3-2-join">3.2. join</a></li><li><a href="#_3-3-sleep">3.3 sleep</a></li><li><a href="#_3-4-yield">3.4 yield</a></li></ul></li><li><a href="#_4-守护线程daemon">4.守护线程Daemon</a></li></ul></div><p></p> <h2 id="线程的状态转换以及基本操作"><a href="#线程的状态转换以及基本操作" class="header-anchor">#</a> 线程的状态转换以及基本操作</h2> <p>在上一篇文章并发编程面临的挑战中谈到了为什么花功夫去学习并发编程的技术，也就是说我们必须了解到并发编程的优缺点，我们在什么情况下可以去考虑开启多个线程去实现我们的业务，当然使用多线程我们应该着重注意一些什么，在上一篇文章中会有一些讨论。那么，说了这么多，无论是针对面试还是实际工作中作为一名软件开发人员都应该具备这样的技能。万事开头难，接下来就应该了解如何新建一个线程？线程状态是怎样转换的？关于线程状态的操作是怎样的？这篇文章就主要围绕这三个方面来聊一聊。</p> <h2 id="_1-新建线程"><a href="#_1-新建线程" class="header-anchor">#</a> 1. 新建线程</h2> <p>一个java程序从main()方法开始执行，然后按照既定的代码逻辑执行，看似没有其他线程参与，但实际上java程序天生就是一个多线程程序，包含了：（1）分发处理发送给给JVM信号的线程；（2）调用对象的finalize方法的线程；（3）清除Reference的线程；（4）main线程，用户程序的入口。那么，如何在用户程序中新建一个线程了，只要有三种方式：</p> <ol><li><p>通过继承Thread类，重写run方法；</p></li> <li><p>通过实现runable接口；</p></li> <li><p>通过实现callable接口这三种方式，下面看具体demo。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code> <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CreateThreadDemo</span> <span class="token punctuation">{</span>

     <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token comment">//1.继承Thread</span>
         <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token annotation punctuation">@Override</span>
             <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                 <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;继承Thread&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                 <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
             <span class="token punctuation">}</span>
         <span class="token punctuation">}</span><span class="token punctuation">;</span>
         thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token comment">//2.实现runable接口</span>
         <span class="token class-name">Thread</span> thread1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token annotation punctuation">@Override</span>
             <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                 <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;实现runable接口&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
             <span class="token punctuation">}</span>
         <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         thread1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token comment">//3.实现callable接口</span>
         <span class="token class-name">ExecutorService</span> service <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newSingleThreadExecutor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> future <span class="token operator">=</span> service<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Callable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token annotation punctuation">@Override</span>
             <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
                 <span class="token keyword">return</span> <span class="token string">&quot;通过实现Callable接口&quot;</span><span class="token punctuation">;</span>
             <span class="token punctuation">}</span>
         <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">try</span> <span class="token punctuation">{</span>
             <span class="token class-name">String</span> result <span class="token operator">=</span> future<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
             <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
             e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ExecutionException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
             e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
     <span class="token punctuation">}</span>

 <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div></li></ol> <p>三种新建线程的方式具体看以上注释，需要主要的是：</p> <ul><li><p>由于java不能多继承可以实现多个接口，因此，在创建线程的时候尽量多考虑采用实现接口的形式；</p></li> <li><p>实现callable接口，提交给ExecutorService返回的是异步执行的结果，另外，通常也可以利用FutureTask(Callable callable)将callable进行包装然后FeatureTask提交给ExecutorsService。如图，</p> <p><img src="data:image/png;base64,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" alt="futureTask接口实现关系-16482162634225"></p></li></ul> <p>另外由于FeatureTask也实现了Runable接口也可以利用上面第二种方式（实现Runable接口）来新建线程；</p> <ul><li>可以通过Executors将Runable转换成Callable，具体方法是：Callable callable(Runnable task, T result)， Callable callable(Runnable task)。</li></ul> <h2 id="_2-线程状态转换"><a href="#_2-线程状态转换" class="header-anchor">#</a> 2. 线程状态转换</h2> <p><img src="/vuepress/assets/img/线程状态转换关系-16482163167647.263cc987.png" alt="线程状态转换关系-16482163167647"></p> <p>此图来源于《JAVA并发编程的艺术》一书中，线程是会在不同的状态间进行转换的，java线程线程转换图如上图所示。线程创建之后调用start()方法开始运行，当调用 wait(),join(),LockSupport.lock() 方法线程会进入到<strong>WAITING</strong>状态，而同样的 wait(long timeout)，sleep(long),join(long),LockSupport.parkNanos(),LockSupport.parkUtil() 增加了超时等待的功能，也就是调用这些方法后线程会进入<strong>TIMED_WAITING</strong>状态，当超时等待时间到达后，线程会切换到Runable的状态，另外当WAITING和TIMED _WAITING状态时可以通过 Object.notify(),Object.notifyAll() 方法使线程转换到Runable状态。当线程出现资源竞争时，即等待获取锁的时候，线程会进入到<strong>BLOCKED</strong>阻塞状态，当线程获取锁时，线程进入到Runable状态。线程运行结束后，线程进入到<strong>TERMINATED</strong>状态，状态转换可以说是线程的生命周期。另外需要注意的是：</p> <ul><li>当线程进入到synchronized方法或者synchronized代码块时，线程切换到的是BLOCKED状态，而使用java.util.concurrent.locks下lock进行加锁的时候线程切换的是WAITING或者TIMED_WAITING状态，因为lock会调用LockSupport的方法。</li></ul> <p>用一个表格将上面六种状态进行一个总结归纳。</p> <p><img src="/vuepress/assets/img/线程状态-16482163576159.eb5da2c7.png" alt="线程状态-16482163576159"></p> <h2 id="_3-线程状态的基本操作"><a href="#_3-线程状态的基本操作" class="header-anchor">#</a> 3. 线程状态的基本操作</h2> <p>除了新建一个线程外，线程在生命周期内还有需要基本操作，而这些操作会成为线程间一种通信方式，比如使用中断（interrupted）方式通知实现线程间的交互等等，下面就将具体说说这些操作。</p> <h3 id="_3-1-interrupted"><a href="#_3-1-interrupted" class="header-anchor">#</a> 3.1. interrupted</h3> <p>中断可以理解为线程的一个标志位，它表示了一个运行中的线程是否被其他线程进行了中断操作。中断好比其他线程对该线程打了一个招呼。其他线程可以调用该线程的 interrupt() 方法对其进行中断操作，同时该线程可以调用 isInterrupted() 来感知其他线程对其自身的中断操作，从而做出响应。另外，同样可以调用Thread的静态方法 interrupted() 对当前线程进行中断操作，该方法会清除中断标志位。<strong>需要注意的是，当抛出InterruptedException时候，会清除中断标志位，也就是说在调用isInterrupted会返回false。</strong></p> <p><img src="/vuepress/assets/img/中断线程方法-164821637606711.e103c1e3.png" alt="中断线程方法-164821637606711"></p> <p>下面结合具体的实例来看一看</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InterruptDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token comment">//sleepThread睡眠1000ms</span>
        <span class="token keyword">final</span> <span class="token class-name">Thread</span> sleepThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token comment">//busyThread一直执行死循环</span>
        <span class="token class-name">Thread</span> busyThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        sleepThread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        busyThread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sleepThread<span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        busyThread<span class="token punctuation">.</span><span class="token function">interrupt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>sleepThread<span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;sleepThread isInterrupted: &quot;</span> <span class="token operator">+</span> sleepThread<span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;busyThread isInterrupted: &quot;</span> <span class="token operator">+</span> busyThread<span class="token punctuation">.</span><span class="token function">isInterrupted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>输出结果</p> <blockquote><p>sleepThread isInterrupted: false</p> <p>busyThread isInterrupted: true</p></blockquote> <p>开启了两个线程分别为sleepThread和BusyThread, sleepThread睡眠1s，BusyThread执行死循环。然后分别对着两个线程进行中断操作，可以看出sleepThread抛出InterruptedException后清除标志位，而busyThread就不会清除标志位。</p> <p>另外，同样可以通过中断的方式实现线程间的简单交互， while (sleepThread.isInterrupted()) 表示在Main中会持续监测sleepThread，一旦sleepThread的中断标志位清零，即 sleepThread.isInterrupted() 返回为false时才会继续Main线程才会继续往下执行。因此，中断操作可以看做线程间一种简便的交互方式。一般在<strong>结束线程时通过中断标志位或者标志位的方式可以有机会去清理资源，相对于武断而直接的结束线程，这种方式要优雅和安全。</strong></p> <h3 id="_3-2-join"><a href="#_3-2-join" class="header-anchor">#</a> 3.2. join</h3> <p>join方法可以看做是线程间协作的一种方式，很多时候，一个线程的输入可能非常依赖于另一个线程的输出，这就像两个好基友，一个基友先走在前面突然看见另一个基友落在后面了，这个时候他就会在原处等一等这个基友，等基友赶上来后，就两人携手并进。其实线程间的这种协作方式也符合现实生活。在软件开发的过程中，从客户那里获取需求后，需要经过需求分析师进行需求分解后，这个时候产品，开发才会继续跟进。<strong>如果一个线程实例A执行了 threadB.join() ，其含义是：当前线程A会等待threadB线程终止后threadA才会继续执行</strong>。关于join方法一共提供如下这些方法:</p> <blockquote><p>public final synchronized void join(long millis)</p> <p>public final synchronized void join(long millis, int nanos)</p> <p>public final void join() throws InterruptedException</p></blockquote> <p>Thread类除了提供join()方法外，另外还提供了超时等待的方法，如果线程threadB在等待的时间内还没有结束的话，threadA会在超时之后继续执行。join方法源码关键是：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">isAlive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>可以看出来当前等待对象threadA会一直阻塞，直到被等待对象threadB结束后即 isAlive() 返回false的时候才会结束while循环，当threadB退出时会调用 notifyAll() 方法通知所有的等待线程。下面用一个具体的例子来说说join方法的使用：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JoinDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> previousThread <span class="token operator">=</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span> curThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JoinThread</span><span class="token punctuation">(</span>previousThread<span class="token punctuation">)</span><span class="token punctuation">;</span>
            curThread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            previousThread <span class="token operator">=</span> curThread<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">JoinThread</span> <span class="token keyword">extends</span> <span class="token class-name">Thread</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token class-name">Thread</span> thread<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">JoinThread</span><span class="token punctuation">(</span><span class="token class-name">Thread</span> thread<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>thread <span class="token operator">=</span> thread<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                thread<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>thread<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; terminated.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>输出结果为：</p> <blockquote><p>main terminated.</p> <p>Thread-0 terminated.</p> <p>Thread-1 terminated.</p> <p>Thread-2 terminated.</p> <p>Thread-3 terminated.</p> <p>Thread-4 terminated.</p> <p>Thread-5 terminated.</p> <p>Thread-6 terminated.</p> <p>Thread-7 terminated.</p> <p>Thread-8 terminated.</p></blockquote> <p>在上面的例子中一个创建了10个线程，每个线程都会等待前一个线程结束才会继续运行。可以通俗的理解成接力，前一个线程将接力棒传给下一个线程，然后又传给下一个线程......</p> <h3 id="_3-3-sleep"><a href="#_3-3-sleep" class="header-anchor">#</a> 3.3 sleep</h3> <p>public static native void sleep(long millis) 方法显然是Thread的静态方法，很显然它是让当前线程按照指定的时间休眠，其休眠时间的精度取决于处理器的计时器和调度器。需要注意的是如果当前线程获得了锁，sleep方法并不会失去锁。sleep方法经常拿来与Object.wait() 方法进行比价，这也是面试经常被问的地方。</p> <blockquote><p><strong>sleep() VS wait()</strong></p></blockquote> <p>两者主要的区别：</p> <ol><li>sleep() 方法是Thread的静态方法，而wait是Object实例方法</li> <li>wait() 方法必须要在同步方法或者同步块中调用，也就是必须已经获得对象锁。而 sleep() 方法没有这个限制可以在任何地方种使用。另外，wait() 方法会释放占有的对象锁，使得该线程进入等待池中，等待下一次获取资源。而sleep()方法只是会让出CPU并不会释放掉对象锁；</li> <li>sleep() 方法在休眠时间达到后如果再次获得CPU时间片就会继续执行，而 wait() 方法必须等待Object.notifty/Object.notifyAll通知后，才会离开等待池，并且再次获得CPU时间片才会继续执行。</li></ol> <h3 id="_3-4-yield"><a href="#_3-4-yield" class="header-anchor">#</a> 3.4 yield</h3> <p>public static native void yield() ；这是一个静态方法，一旦执行，它会是当前线程让出CPU，但是，需要注意的是，让出的CPU并不是代表当前线程不再运行了，如果在下一次竞争中，又获得了CPU时间片当前线程依然会继续运行。另外，让出的时间片只会分配<strong>给当前线程相同优先级</strong>的线程。什么是线程优先级了？下面就来具体聊一聊。</p> <p>现代操作系统基本采用时分的形式调度运行的线程，操作系统会分出一个个时间片，线程会被分配到若干时间片，当前时间片用完后就会发生线程调度，并等待着下次分配。线程分配到的时间多少也就决定了线程使用处理器资源的多少，而<strong>线程优先级就是决定线程需要或多或少分配一些处理器资源的线程属性</strong>。</p> <p>在Java程序中，通过一个<strong>整型成员变量Priority</strong>来控制优先级，优先级的范围从1~10。在构建线程的时候可以通过 <strong>setPriority(int)</strong> 方法进行设置，默认优先级为5，优先级高的线程相较于优先级低的线程优先获得处理器时间片。需要注意的是在不同JVM以及操作系统上，线程规划存在差异，有些操作系统甚至会忽略线程优先级的设定。</p> <blockquote><p><strong>sleep() VS yield()</strong></p></blockquote> <p>需要注意的是，sleep() 和 yield() 方法，同样都是当前线程会交出处理器资源，而它们不同的是，sleep() 交出来的时间片其他线程都可以去竞争，也就是说都有机会获得当前线程让出的时间片。而 yield() 方法只允许与当前线程具有相同优先级的线程能够获得释放出来的CPU时间片。</p> <h2 id="_4-守护线程daemon"><a href="#_4-守护线程daemon" class="header-anchor">#</a> 4.守护线程Daemon</h2> <p>守护线程是一种特殊的线程，就和它的名字一样，它是系统的守护者，在后台默默地守护一些系统服务，比如垃圾回收线程，JIT线程就可以理解守护线程。与之对应的就是用户线程，用户线程就可以认为是系统的工作线程，它会完成整个系统的业务操作。用户线程完全结束后就意味着整个系统的业务任务全部结束了，因此系统就没有对象需要守护的了，守护线程自然而然就会退。<strong>当一个Java应用，只有守护线程的时候，虚拟机就会自然退出</strong>。下面以一个简单的例子来表述Daemon线程的使用。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DaemonDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> daemonThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">try</span> <span class="token punctuation">{</span>
                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;i am alive&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;finally block&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        daemonThread<span class="token punctuation">.</span><span class="token function">setDaemon</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        daemonThread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//确保main线程结束前能给daemonThread能够分到时间片</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">800</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>输出结果为：</p> <blockquote><p>i am alive</p> <p>finally block</p> <p>i am alive</p></blockquote> <p>上面的例子中daemodThread run方法中是一个while死循环，会一直打印，但是当main线程结束后daemonThread就会退出所以不会出现死循环的情况。main线程先睡眠800ms保证daemonThread能够拥有一次时间片的机会，也就是说可以正常执行一次打印“i am alive”操作和一次finally块中&quot;finally block&quot;操作。紧接着main 线程结束后，daemonThread退出，这个时候只打印了&quot;i am alive&quot;并没有打印finnal块中的“finally block ”。因此，这里需要注意的是<strong>守护线程在退出的时候并不会执行finnaly块中的代码，所以将释放资源等操作不要放在finnaly块中执行，这种操作是不安全的</strong>（毕竟是虚拟机直接结束退出）</p> <p>线程可以通过 setDaemon(true) 的方法将线程设置为守护线程。并且需要注意的是设置守护线程要先于 start() 方法，否则会报</p> <blockquote><p>Exception in thread &quot;main&quot; java.lang.IllegalThreadStateException at java.lang.Thread.setDaemon(Thread.java:1365) at learn.DaemonDemo.main(DaemonDemo.java:19)</p></blockquote> <p>这样的异常，但是该线程还是会执行，只不过会当做正常的用户线程执行。</p> <blockquote><p>参考文献：</p> <p><a href="https://juejin.cn/post/6844903600309846023" target="_blank" rel="noopener noreferrer">线程的状态转换以及基本操作<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote></div> <footer class="page-edit" style="display:none;"><!----> <div class="last-updated"><span class="prefix">上次更新：: </span> <span class="time">6/19/2022, 4:51:37 PM</span></div></footer> <!----> <!----></main> <!----> <div class="comments-wrapper" data-v-4698c43e><!----></div></div></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-44bd5a18 data-v-44bd5a18><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-44bd5a18><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-44bd5a18></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-44bd5a18></path></svg></div><!----><div></div><!----><APlayer audio="" fixed="true" mini="true" theme="#282c34" loop="loop" order="list" preload="auto" volume="0.7" mutex="true" lrc-type="0" list-max-height="250" storage-name="vuepress-plugin-meting" id="aplayer-fixed"></APlayer></div></div>
    <script src="/vuepress/assets/js/app.1688b474.js" defer></script><script src="/vuepress/assets/js/4.87cca1e2.js" defer></script><script src="/vuepress/assets/js/1.e3a634da.js" defer></script><script src="/vuepress/assets/js/19.f57142c1.js" defer></script><script src="/vuepress/assets/js/23.18ff150a.js" defer></script>
  </body>
</html>
